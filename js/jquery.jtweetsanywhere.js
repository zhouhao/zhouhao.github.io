/**
 * @package Site Template
 * @subpackage Increase HTML
 * @since Increase 1.0
 */

/**
 * jTweetsAnywhere V1.3.1
 * http://thomasbillenstein.com/jTweetsAnywhere/
 *
 * Copyright 2011, Thomas Billenstein
 * Licensed under the MIT license.
 * http://thomasbillenstein.com/jTweetsAnywhere/license.txt
 */

/**
 * The code below is used as supplied by Twitter (https://dev.twitter.com/docs/intents)
 *
 * Twitter says:

 * "Some sites may prefer to embed the unobtrusive Web Intents pop-up Javascript inline
 * or without a dependency to platform.twitter.com. The snippet below will offer the
 * equivalent functionality without the external dependency."
 */


(function(){function g(g){g=g||window.event;var h=g.target||g.srcElement,i,j,k;while(h&&h.nodeName.toLowerCase()!=="a"){h=h.parentNode}if(h&&h.nodeName.toLowerCase()==="a"&&h.href){i=h.href.match(a);if(i){j=Math.round(f/2-c/2);k=0;if(e>d){k=Math.round(e/2-d/2)}window.open(h.href,"intent",b+",width="+c+",height="+d+",left="+j+",top="+k);g.returnValue=false;g.preventDefault&&g.preventDefault()}}}if(window.__twitterIntentHandler)return;var a=/twitter\.com(\:\d{2,4})?\/intent\/(\w+)/,b="scrollbars=yes,resizable=yes,toolbar=no,location=yes",c=550,d=420,e=screen.height,f=screen.width;if(document.addEventListener){document.addEventListener("click",g,false)}else if(document.attachEvent){document.attachEvent("onclick",g)}window.__twitterIntentHandler=true})();(function(){if(window.__JTA_I18N){return}JTA_I18N=function(){function b(a,b){function c(a,b,c){var f=d(a);if(b!==1&&typeof f==="object"){f=e(a,f,b)}if(f&&c){for(p in c){f=f.replace(p,d(c[p]))}}return f}function d(a){return b?b[a]||a:a}function e(a,b,c){for(pat in b){var d=/(\d+)\s*-\s*(\d+)/,e=d.exec(pat);if(e){var f=e[1];var g=e[2];if(c>=f&&c<=g){return b[pat]}}d=/([<>]=?)\s*(\d+)/;e=d.exec(pat);if(e){var h=e[1];var i=e[2];if(h===">"&&c>i){return b[pat]}else if(h===">="&&c>=i){return b[pat]}else if(h==="<"&&c<i){return b[pat]}else if(h==="<="&&c<=i){return b[pat]}}d=/\s*,\s*/;e=pat.split(d);if(e){for(var j=0;j<e.length;j++){if(c===~~e[j]){return b[pat]}}}}return a}this.getLocale=function(){return a};this.get=function(a,b){return c(a,1,b)};this._=this.get;this.nget=function(a,b,d,e){return d===1?c(a,1,e):c(b,d,e)};this.__=this.nget;}var a={};return{addResourceBundle:function(b,c,d){if(!a[b]){a[b]={}}a[b][c]=d},getResourceBundle:function(c,d){return new b(d,a[c]?a[c][d]:null)}}}();window.__JTA_I18N=true})();JTA_I18N.addResourceBundle("jTweetsAnywhere","en",{$$monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});(function(a){a.fn.jTweetsAnywhere=function(b){var c=a.extend({username:"tbillenstein",list:null,searchParams:null,count:0,tweetProfileImagePresent:null,tweetFilter:defaultTweetFilter,showTweetFeed:true,showFollowButton:false,showConnectButton:false,showLoginInfo:false,showTweetBox:false,locale:"en",tweetDataProvider:defaultTweetDataProvider,rateLimitDataProvider:defaultRateLimitDataProvider,mainDecorator:defaultMainDecorator,tweetFeedDecorator:defaultTweetFeedDecorator,tweetDecorator:defaultTweetDecorator,tweetProfileImageDecorator:defaultTweetProfileImageDecorator,tweetBodyDecorator:defaultTweetBodyDecorator,tweetUsernameDecorator:defaultTweetUsernameDecorator,tweetTextDecorator:defaultTweetTextDecorator,tweetAttributesDecorator:defaultTweetAttributesDecorator,tweetTwitterBirdDecorator:defaultTweetTwitterBirdDecorator,tweetTimestampDecorator:defaultTweetTimestampDecorator,tweetSourceDecorator:defaultTweetSourceDecorator,tweetGeoLocationDecorator:defaultTweetGeoLocationDecorator,tweetInReplyToDecorator:defaultTweetInReplyToDecorator,tweetRetweeterDecorator:defaultTweetRetweeterDecorator,tweetActionsDecorator:defaultTweetActionsDecorator,tweetActionReplyDecorator:defaultTweetActionReplyDecorator,tweetActionRetweetDecorator:defaultTweetActionRetweetDecorator,tweetActionFavoriteDecorator:defaultTweetActionFavoriteDecorator,tweetFeedControlsDecorator:defaultTweetFeedControlsDecorator,tweetFeedControlsMoreBtnDecorator:defaultTweetFeedControlsMoreBtnDecorator,tweetFeedControlsPrevBtnDecorator:defaultTweetFeedControlsPrevBtnDecorator,tweetFeedControlsNextBtnDecorator:defaultTweetFeedControlsNextBtnDecorator,tweetFeedAutorefreshTriggerDecorator:defaultTweetFeedAutorefreshTriggerDecorator,tweetFeedAutorefreshTriggerContentDecorator:defaultTweetFeedAutorefreshTriggerContentDecorator,connectButtonDecorator:defaultConnectButtonDecorator,loginInfoDecorator:defaultLoginInfoDecorator,loginInfoContentDecorator:defaultLoginInfoContentDecorator,followButtonDecorator:defaultFollowButtonDecorator,tweetBoxDecorator:defaultTweetBoxDecorator,linkDecorator:defaultLinkDecorator,usernameDecorator:defaultUsernameDecorator,hashtagDecorator:defaultHashtagDecorator,loadingDecorator:defaultLoadingDecorator,errorDecorator:defaultErrorDecorator,noDataDecorator:defaultNoDataDecorator,tweetTimestampFormatter:defaultTweetTimestampFormatter,tweetTimestampTooltipFormatter:defaultTweetTimestampTooltipFormatter,tweetVisualizer:defaultTweetVisualizer,loadingIndicatorVisualizer:defaultLoadingIndicatorVisualizer,autorefreshTriggerVisualizer:defaultAutorefreshTriggerVisualizer,onDataRequestHandler:defaultOnDataRequestHandler,onRateLimitDataHandler:defaultOnRateLimitDataHandler,onOptionsInitializingHandler:defaultOnOptionsInitializingHandler,_tweetFeedConfig:{autoConformToTwitterStyleguide:false,showTwitterBird:true,showTimestamp:{refreshInterval:0},showSource:false,showGeoLocation:true,showInReplyTo:true,showActionReply:false,showActionRetweet:false,showActionFavorite:false,showProfileImages:null,showUserScreenNames:null,showUserFullNames:false,expandHovercards:false,includeRetweets:true,paging:{mode:"none",_limit:0,_offset:0},autorefresh:{mode:"none",interval:60,duration:3600,max:-1,_startTime:null,_triggerElement:null},_pageParam:0,_maxId:null,_recLevel:0,_noData:false,_clearBeforePopulate:false},_tweetBoxConfig:{counter:true,width:515,height:65,label:null,defaultContent:"",onTweet:function(a,b){}},_connectButtonConfig:{size:"medium"},_baseSelector:null,_baseElement:null,_tweetFeedElement:null,_tweetFeedControlsElement:null,_followButtonElement:null,_loginInfoElement:null,_connectButtonElement:null,_tweetBoxElement:null,_loadingIndicatorElement:null,_noDataElement:null,_tweetsCache:[],_autorefreshTweetsCache:[],_stats:{dataRequestCount:0,rateLimitPreventionCount:0,rateLimit:{remaining_hits:150,hourly_limit:150}},_resourceBundle:null},b);c._baseSelector=this.selector;c.onOptionsInitializingHandler(c);setupOptions(c);if(!c.mainDecorator){return}a.ajaxSetup({cache:true});return this.each(function(){c._baseElement=a(this);c._tweetFeedElement=c.tweetFeedDecorator?a(c.tweetFeedDecorator(c)):null;c._tweetFeedControlsElement=c.tweetFeedControlsDecorator?a(c.tweetFeedControlsDecorator(c)):null;c._followButtonElement=c.followButtonDecorator?a(c.followButtonDecorator(c)):null;c._tweetBoxElement=c.tweetBoxDecorator?a(c.tweetBoxDecorator(c)):null;c._connectButtonElement=c.connectButtonDecorator?a(c.connectButtonDecorator(c)):null;c._loginInfoElement=c.loginInfoDecorator?a(c.loginInfoDecorator(c)):null;c.mainDecorator(c);populateTweetFeed(c);populateAnywhereControls(c);bindEventHandlers(c);setupAutorefresh(c)})};defaultMainDecorator=function(a){if(a._tweetFeedElement){a._baseElement.append(a._tweetFeedElement)}if(a._tweetFeedControlsElement){a._baseElement.append(a._tweetFeedControlsElement)}if(a._connectButtonElement){a._baseElement.append(a._connectButtonElement)}if(a._loginInfoElement){a._baseElement.append(a._loginInfoElement)}if(a._followButtonElement){a._baseElement.append(a._followButtonElement)}if(a._tweetBoxElement){a._baseElement.append(a._tweetBoxElement)}};defaultTweetFeedControlsDecorator=function(a){var b="";if(a._tweetFeedConfig.paging.mode=="prev-next"){if(a.tweetFeedControlsPrevBtnDecorator){b+=a.tweetFeedControlsPrevBtnDecorator(a)}if(a.tweetFeedControlsNextBtnDecorator){b+=a.tweetFeedControlsNextBtnDecorator(a)}}else if(a._tweetFeedConfig.paging.mode=="endless-scroll"){}else{if(a.tweetFeedControlsMoreBtnDecorator){b+=a.tweetFeedControlsMoreBtnDecorator(a)}}return'<div class="jta-tweet-list-controls">'+b+"</div>"};defaultTweetFeedControlsMoreBtnDecorator=function(a){return'<span class="jta-tweet-list-controls-button jta-tweet-list-controls-button-more">'+a._resourceBundle._("More")+"</span>"};defaultTweetFeedControlsPrevBtnDecorator=function(a){return'<span class="jta-tweet-list-controls-button jta-tweet-list-controls-button-prev">'+a._resourceBundle._("Prev")+"</span>"};defaultTweetFeedControlsNextBtnDecorator=function(a){return'<span class="jta-tweet-list-controls-button jta-tweet-list-controls-button-next">'+a._resourceBundle._("Next")+"</span>"};defaultTweetFeedAutorefreshTriggerDecorator=function(a,b){var c="";if(b.tweetFeedAutorefreshTriggerContentDecorator){c=b.tweetFeedAutorefreshTriggerContentDecorator(a,b)}return'<li class="jta-tweet-list-autorefresh-trigger">'+c+"</li>"};defaultTweetFeedAutorefreshTriggerContentDecorator=function(a,b){var c=b._resourceBundle.__("%count% new tweet","%count% new tweets",a,{"%count%":a});return'<span class="jta-tweet-list-autorefresh-trigger-content">'+c+"</span>"};defaultTweetFeedDecorator=function(a){return'<ul class="jta-tweet-list"></ul>'};defaultTweetDecorator=function(a,b){var c="";if(b._tweetFeedConfig.showProfileImages){c+=b.tweetProfileImageDecorator(a,b)}if(b.tweetBodyDecorator){c+=b.tweetBodyDecorator(a,b)}return'<li class="jta-tweet-list-item">'+c+"</li>"};defaultTweetProfileImageDecorator=function(a,b){var c=a.retweeted_status||a;var d=getScreenName(a);var e=c.user?c.user.profile_image_url:false||c.profile_image_url;var f='<a class="jta-tweet-profile-image-link" href="http://twitter.com/'+d+'" target="_blank">'+'<img src="'+e+'" alt="'+d+'"'+(isAnywherePresent()?"":' title="'+d+'"')+"/>"+"</a>";return'<div class="jta-tweet-profile-image">'+f+"</div>"};defaultTweetBodyDecorator=function(a,b){var c="";if(b.tweetTextDecorator){c+=b.tweetTextDecorator(a,b)}if(b.tweetAttributesDecorator){c+=b.tweetAttributesDecorator(a,b)}if(b.tweetActionsDecorator){c+=b.tweetActionsDecorator(a,b)}return'<div class="jta-tweet-body '+(b._tweetFeedConfig.showProfileImages?"jta-tweet-body-list-profile-image-present":"")+'">'+c+"</div>"};defaultTweetTextDecorator=function(a,b){var c=a.text;if(a.retweeted_status&&(b._tweetFeedConfig.showUserScreenNames||b._tweetFeedConfig.showUserScreenNames==null||b._tweetFeedConfig.showUserFullNames||b._tweetFeedConfig.showUserFullNames==null)){c=a.retweeted_status.text}if(b.linkDecorator){c=b.linkDecorator(c,b)}if(b.usernameDecorator){c=b.usernameDecorator(c,b)}if(b.hashtagDecorator){c=b.hashtagDecorator(c,b)}if(b._tweetFeedConfig.showUserScreenNames||b._tweetFeedConfig.showUserFullNames||a.retweeted_status&&(b._tweetFeedConfig.showUserScreenNames==null||b._tweetFeedConfig.showUserFullNames==null)){c=b.tweetUsernameDecorator(a,b)+" "+c}return'<p class="jta-tweet-text">'+c+"</p>"};defaultTweetUsernameDecorator=function(a,b){var c=getScreenName(a);var d=getFullName(a);var e=null;if(c&&(b._tweetFeedConfig.showUserScreenNames||b._tweetFeedConfig.showUserScreenNames==null&&a.retweeted_status)){e='<span class="jta-tweet-user-screen-name">'+'<a class="jta-tweet-user-screen-name-link" href="http://twitter.com/'+c+'" target="_blank">'+c+"</a>"+"</span>"}var f=null;if(d&&(b._tweetFeedConfig.showUserFullNames||b._tweetFeedConfig.showUserFullNames==null&&a.retweeted_status)){f='<span class="jta-tweet-user-full-name">'+(e?" ":"")+'<a class="jta-tweet-user-full-name-link" href="http://twitter.com/'+c+'" name="'+c+'" target="_blank">'+d+"</a>"+"</span>"}var g="";if(e){g+=e}if(f){if(e){g+=" "}g+=f}if(e||f){g='<span class="jta-tweet-user-name">'+(a.retweeted_status?"RT ":"")+g+"</span>"}return g};defaultTweetAttributesDecorator=function(a,b){var c="";if(b.tweetTwitterBirdDecorator||b.tweetTimestampDecorator||b.tweetSourceDecorator||b.tweetGeoLocationDecorator||b.tweetInReplyToDecorator||a.retweeted_status&&b.tweetRetweeterDecorator){if(b.tweetTwitterBirdDecorator){c+=b.tweetTwitterBirdDecorator(a,b)}if(b.tweetTimestampDecorator){c+=b.tweetTimestampDecorator(a,b)}if(b.tweetSourceDecorator){c+=b.tweetSourceDecorator(a,b)}if(b.tweetGeoLocationDecorator){c+=b.tweetGeoLocationDecorator(a,b)}if(b.tweetInReplyToDecorator){c+=b.tweetInReplyToDecorator(a,b)}if(a.retweeted_status&&b.tweetRetweeterDecorator){c+=b.tweetRetweeterDecorator(a,b)}}return c};defaultTweetTimestampDecorator=function(a,b){var c=a.retweeted_status||a;var d=formatDate(c.created_at);var e=b.tweetTimestampFormatter(d,b);var f=b.tweetTimestampTooltipFormatter(d);var g='<abbr class="jta-tweet-timestamp published" data-timestamp="'+d+'" title="'+f+'">'+'<a class="jta-tweet-timestamp-link" href="http://twitter.com/'+getScreenName(a)+"/status/"+c.id+'" target="_blank">'+e+"</a>"+"</abbr>";return g};defaultTweetTwitterBirdDecorator=function(a,b){var c=getScreenName(a);var d="https://twitter.com/intent/user?screen_name="+c;var e=c+" "+b._resourceBundle._("on Twitter");var f='<span class="jta-tweet-twitter-bird">'+'<a href="'+d+'" target="_blank" title="'+e+'">'+'<span class="jta-tweet-twitter-bird-icon"> </span>'+"</a>"+"</span>";return f};defaultTweetTimestampTooltipFormatter=function(a){var b=new Date(a);return b.toLocaleString()};defaultTweetTimestampFormatter=function(a,b){var c=new Date;var d=parseInt((c.getTime()-Date.parse(a))/1e3);var e="";if(d<60){e+=b._resourceBundle.__("%secs% second ago","%secs% seconds ago",d,{"%secs%":d})}else if(d<3600){var f=parseInt((d+30)/60);e+=b._resourceBundle.__("%mins% minute ago","%mins% minutes ago",f,{"%mins%":f})}else if(d<86400){var f=parseInt((d+1800)/3600);e+=b._resourceBundle.__("%hours% hour ago","%hours% hours ago",f,{"%hours%":f})}else{var f=parseInt((d+43200)/86400);e+=b._resourceBundle.__("%days% day ago","%days% days ago",f,{"%days%":f})}return e};defaultTweetSourceDecorator=function(a,b){var c=a.retweeted_status||a;var d=c.source.replace(/\&lt\;/gi,"<").replace(/\&gt\;/gi,">").replace(/\&quot\;/gi,'"');var e='<span class="jta-tweet-source">'+" "+b._resourceBundle._("via")+" "+'<span class="jta-tweet-source-link">'+d+"</span>"+"</span>";return e};defaultTweetGeoLocationDecorator=function(a,b){var c="";var d=a.retweeted_status||a;var e=null;if(d.geo&&d.geo.coordinates){e=d.geo.coordinates.join()}else if(d.place&&d.place.full_name){e=d.place.full_name}if(e){var f=b._resourceBundle._("here");if(d.place&&d.place.full_name){f=d.place.full_name}var g="http://maps.google.com/maps?q="+e;c='<span class="jta-tweet-location">'+" "+b._resourceBundle._("from")+" "+'<a class="jta-tweet-location-link" href="'+g+'" target="_blank">'+f+"</a>"+"</span>"}return c};defaultTweetInReplyToDecorator=function(a,b){var c=a.retweeted_status||a;var d="";if(c.in_reply_to_status_id&&c.in_reply_to_screen_name){var e="http://twitter.com/"+c.in_reply_to_screen_name+"/status/"+c.in_reply_to_status_id;var f=b._resourceBundle._("in reply to")+" "+c.in_reply_to_screen_name;d='<span class="jta-tweet-inreplyto">'+" "+'<a class="jta-tweet-inreplyto-link" href="'+e+'" target="_blank">'+f+"</a>"+"</span>"}return d};defaultTweetRetweeterDecorator=function(a,b){var c="";if(a.retweeted_status){var d=getUserScreenName(a);var e=(a.retweeted_status.retweet_count||0)-1;var f='<a class="jta-tweet-retweeter-link" href="http://twitter.com/'+d+'" target="_blank">'+d+"</a>";var g=b._resourceBundle.__(" and %rtc% other"," and %rtc% others",e,{"%rtc%":e});c="<br/>"+'<span class="jta-tweet-retweeter">'+b._resourceBundle._("Retweeted by")+" "+f+(e>0?g:"")+"</span>"}return c};defaultTweetActionsDecorator=function(a,b){var c="";if(b.tweetActionReplyDecorator||b.tweetActionRetweetDecorator||b.tweetActionFavoriteDecorator){c+='<span class="jta-tweet-actions">';if(b.tweetActionReplyDecorator){c+=b.tweetActionReplyDecorator(a,b)}if(b.tweetActionRetweetDecorator){c+=b.tweetActionRetweetDecorator(a,b)}if(b.tweetActionFavoriteDecorator){c+=b.tweetActionFavoriteDecorator(a,b)}c+="</span>"}return c};defaultTweetActionReplyDecorator=function(a,b){var c="https://twitter.com/intent/tweet?in_reply_to="+a.id;var d=b._resourceBundle._("Reply");var e='<span class="jta-tweet-action-reply">'+'<a href="'+c+'">'+d+"</a>"+"</span>";return e};defaultTweetActionRetweetDecorator=function(a,b){var c="https://twitter.com/intent/retweet?tweet_id="+a.id;var d=b._resourceBundle._("Retweet");var e='<span class="jta-tweet-action-retweet">'+'<a href="'+c+'">'+d+"</a>"+"</span>";return e};defaultTweetActionFavoriteDecorator=function(a,b){var c="https://twitter.com/intent/favorite?tweet_id="+a.id;var d=b._resourceBundle._("Favorite");var e='<span class="jta-tweet-action-favorite">'+'<a href="'+c+'">'+d+"</a>"+"</span>";return e};defaultConnectButtonDecorator=function(a){return'<div class="jta-connect-button"></div>'};defaultLoginInfoDecorator=function(a){return'<div class="jta-login-info"></div>'};defaultLoginInfoContentDecorator=function(a,b){var c="";if(b.isConnected()){var d=b.currentUser.data("screen_name");var e=b.currentUser.data("profile_image_url");c='<div class="jta-login-info-profile-image">'+'<a href="http://twitter.com/'+d+'" target="_blank">'+'<img src="'+e+'" alt="'+d+'" title="'+d+'"/>'+"</a>"+"</div>"+'<div class="jta-login-info-block">'+'<div class="jta-login-info-screen-name">'+'<a href="http://twitter.com/'+d+'" target="_blank">'+d+"</a>"+"</div>"+'<div class="jta-login-info-sign-out">'+a._resourceBundle._("Sign out")+"</div>"+"</div>"+'<div class="jta-clear"> </div>'}return c};defaultFollowButtonDecorator=function(a){return'<div class="jta-follow-button"></div>'};defaultTweetBoxDecorator=function(a){return'<div class="jta-tweet-box"></div>'};defaultLinkDecorator=function(a,b){return a.replace(/((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/gi,'<a href="$1" class="jta-tweet-a jta-tweet-link" target="_blank" rel="nofollow">$1</a>')};defaultUsernameDecorator=function(a,b){return isAnywherePresent()?a:a.replace(/\B@(\w+)/gi,'@<a href="http://twitter.com/$1" class="jta-tweet-a twitter-anywhere-user" target="_blank" rel="nofollow">$1</a>')};defaultHashtagDecorator=function(a,b){return a.replace(/#([a-zA-Z0-9_]+)/gi,'<a href="http://search.twitter.com/search?q=%23$1" class="jta-tweet-a jta-tweet-hashtag" title="#$1" target="_blank" rel="nofollow">#$1</a>')};defaultLoadingDecorator=function(a){return'<li class="jta-loading"> <span class="loader"></span> </li>'};defaultErrorDecorator=function(a,b){return'<li class="jta-error">'+b._resourceBundle._("ERROR")+": "+a+"</li>"};defaultNoDataDecorator=function(a){return'<li class="jta-nodata">'+a._resourceBundle._("No more data")+"</li>"};defaultTweetFilter=function(a,b){return true};defaultTweetVisualizer=function(a,b,c,d){a[c](b)};defaultLoadingIndicatorVisualizer=function(a,b,c,d){defaultVisualizer(a,b,"append","fadeIn",600,"fadeOut",200,d)};defaultAutorefreshTriggerVisualizer=function(a,b,c,d){defaultVisualizer(a,b,"prepend","slideDown",600,"fadeOut",200,d)};defaultVisualizer=function(a,b,c,d,e,f,g,h){var i=function(){if(h){h()}};if(a){b.hide();a[c](b);b[d](e,i)}else{b[f](g,function(){b.remove();i()})}};defaultOnDataRequestHandler=function(a,b){return true};defaultOnRateLimitDataHandler=function(a,b){};defaultOnOptionsInitializingHandler=function(a){};updateLoginInfoElement=function(b,c){if(b._loginInfoElement&&b.loginInfoContentDecorator){b._loginInfoElement.children().remove();b._loginInfoElement.append(b.loginInfoContentDecorator(b,c));a(b._baseSelector+" .jta-login-info-sign-out").bind("click",function(){twttr.anywhere.signOut()})}};getFeedUrl=function(a,b){var c="https:"==document.location.protocol?"https:":"http:";if(a.searchParams){c+="//search.twitter.com/search.json?"+(a.searchParams instanceof Array?a.searchParams.join("&"):a.searchParams)+"&rpp=100"}else if(a.list){if("favorites"==a.list){c+="//api.twitter.com/1/favorites/"+a.username+".json?count=20"}else{c+="//api.twitter.com/1/"+a.username+"/lists/"+a.list+"/statuses.json?per_page=20"}}else{c+="//api.twitter.com/1/statuses/user_timeline.json?screen_name="+a.username+"&count=20";if(a._tweetFeedConfig.includeRetweets)c+="&include_rts=true"}if(b){c+=(a._tweetFeedConfig._maxId?"&max_id="+a._tweetFeedConfig._maxId:"")+"&page="+a._tweetFeedConfig._pageParam}c+="&callback=?";return c};isAnywherePresent=function(){return typeof twttr!="undefined"&&typeof twttr.anywhere!="undefined"};clearTweetFeed=function(a){if(a._tweetFeedElement){a._tweetFeedElement.empty()}};setupOptions=function(b){b._resourceBundle=JTA_I18N.getResourceBundle("jTweetsAnywhere",b.locale);b._tweetBoxConfig.label=b._resourceBundle._("What's happening?");if(typeof b.username!="string"){if(!b.searchParams){b.searchParams=["q=from:"+b.username.join(" OR from:")]}b.username=b.username[0]}if(typeof b.showTweetFeed=="object"){a.extend(true,b._tweetFeedConfig,b.showTweetFeed)}if(typeof b.showTweetBox=="object"){a.extend(true,b._tweetBoxConfig,b.showTweetBox);b.showTweetBox=true}if(typeof b.showConnectButton=="object"){b._connectButtonConfig=b.showConnectButton;b.showConnectButton=true}if(b._tweetFeedConfig.showProfileImages==null){b._tweetFeedConfig.showProfileImages=b.tweetProfileImagePresent}if(b._tweetFeedConfig.showProfileImages==null){b._tweetFeedConfig.showProfileImages=(b.list||b.searchParams)&&b.tweetProfileImageDecorator}if(b._tweetFeedConfig.autoConformToTwitterStyleguide){b._tweetFeedConfig.showUserFullNames=null;b._tweetFeedConfig.showTwitterBird=true;b._tweetFeedConfig.showActionReply=true;b._tweetFeedConfig.showActionRetweet=true;b._tweetFeedConfig.showActionFavorite=true}if(b._tweetFeedConfig.showUserScreenNames==null){if(b.list||b.searchParams){b._tweetFeedConfig.showUserScreenNames=true}if(!b.tweetUsernameDecorator){b._tweetFeedConfig.showUserScreenNames=false}}if(b._tweetFeedConfig.showUserFullNames==null){if(b.list||b.searchParams){b._tweetFeedConfig.showUserFullNames=true}if(!b.tweetUsernameDecorator){b._tweetFeedConfig.showUserFullNames=false}}b.count=validateRange(b.count,0,b.searchParams?100:20);b._tweetFeedConfig.autorefresh.interval=Math.max(30,b._tweetFeedConfig.autorefresh.interval);if(b._tweetFeedConfig.autorefresh.max<=0){b._tweetFeedConfig.autorefresh.max=-1}b._tweetFeedConfig.paging._offset=0;b._tweetFeedConfig.paging._limit=b.count;if(b.count==0||!b.showTweetFeed){b.tweetFeedDecorator=null;b.tweetFeedControlsDecorator=null}if(b._tweetFeedConfig.paging.mode=="none"){b.tweetFeedControlsDecorator=null}if(!b.showFollowButton){b.followButtonDecorator=null}if(!b.showTweetBox){b.tweetBoxDecorator=null}if(!b.showConnectButton){b.connectButtonDecorator=null}if(!b.showLoginInfo){b.loginInfoDecorator=null}if(!b._tweetFeedConfig.showTwitterBird){b.tweetTwitterBirdDecorator=null}if(!b._tweetFeedConfig.showTimestamp){b.tweetTimestampDecorator=null}if(!b._tweetFeedConfig.showSource){b.tweetSourceDecorator=null}if(!b._tweetFeedConfig.showGeoLocation){b.tweetGeoLocationDecorator=null}if(!b._tweetFeedConfig.showInReplyTo){b.tweetInReplyToDecorator=null}if(!b._tweetFeedConfig.showActionReply){b.tweetActionReplyDecorator=null}if(!b._tweetFeedConfig.showActionRetweet){b.tweetActionRetweetDecorator=null}if(!b._tweetFeedConfig.showActionFavorite){b.tweetActionFavoriteDecorator=null}};setupAutorefresh=function(a){a._tweetFeedConfig.autorefresh._startTime=(new Date).getTime();startAutorefresh(a);startTimestampRefresh(a)};populateTweetFeed=function(b){if(b.tweetDecorator&&b._tweetFeedElement){getPagedTweets(b,function(b,c){if(c._tweetFeedConfig._clearBeforePopulate){clearTweetFeed(c)}hideLoadingIndicator(c,function(){a.each(b,function(b,d){c.tweetVisualizer(c._tweetFeedElement,a(c.tweetDecorator(d,c)),"append",c)});if(c._tweetFeedConfig._noData&&c.noDataDecorator&&!c._tweetFeedConfig._noDataElement){c._tweetFeedConfig._noDataElement=a(c.noDataDecorator(c));c._tweetFeedElement.append(c._tweetFeedConfig._noDataElement)}if(c._tweetFeedConfig._clearBeforePopulate){c._tweetFeedElement.scrollTop(0)}addHovercards(c)})})}};populateTweetFeed2=function(b){if(b._tweetFeedElement&&b._autorefreshTweetsCache.length>0){if(b._tweetFeedConfig.autorefresh.mode=="trigger-insert"){if(b._tweetFeedConfig.autorefresh._triggerElement){if(b.tweetFeedAutorefreshTriggerContentDecorator){b._tweetFeedConfig.autorefresh._triggerElement.html(b.tweetFeedAutorefreshTriggerContentDecorator(b._autorefreshTweetsCache.length,b))}}else{if(b.tweetFeedAutorefreshTriggerDecorator){b._tweetFeedConfig.autorefresh._triggerElement=a(b.tweetFeedAutorefreshTriggerDecorator(b._autorefreshTweetsCache.length,b));b._tweetFeedConfig.autorefresh._triggerElement.bind("click",function(){b.autorefreshTriggerVisualizer(null,b._tweetFeedConfig.autorefresh._triggerElement,b,function(){insertTriggerTweets(b)});b._tweetFeedConfig.autorefresh._triggerElement=null});b.autorefreshTriggerVisualizer(b._tweetFeedElement,b._tweetFeedConfig.autorefresh._triggerElement,b)}}}else{insertTriggerTweets(b)}}};insertTriggerTweets=function(b){if(b.tweetDecorator&&b._autorefreshTweetsCache.length>0){while(b._autorefreshTweetsCache.length>0){var c=b._autorefreshTweetsCache.pop();b._tweetsCache.unshift(c);b._tweetFeedConfig.paging._offset++;b.tweetVisualizer(b._tweetFeedElement,a(b.tweetDecorator(c,b)),"prepend",b)}addHovercards(b)}};addHovercards=function(a){if(isAnywherePresent()){twttr.anywhere(function(b){b(a._baseSelector+" .jta-tweet-list").hovercards({expanded:a._tweetFeedConfig.expandHovercards});b(a._baseSelector+" .jta-tweet-profile-image img").hovercards({expanded:a._tweetFeedConfig.expandHovercards,username:function(a){return a.alt}});b(a._baseSelector+" .jta-tweet-retweeter-link").hovercards({expanded:a._tweetFeedConfig.expandHovercards,username:function(a){return a.text}});b(a._baseSelector+" .jta-tweet-user-screen-name-link").hovercards({expanded:a._tweetFeedConfig.expandHovercards,username:function(a){return a.text}});b(a._baseSelector+" .jta-tweet-user-full-name-link").hovercards({expanded:a._tweetFeedConfig.expandHovercards,username:function(a){return a.name}})})}};populateAnywhereControls=function(b){if(isAnywherePresent()){twttr.anywhere(function(c){if(b.tweetBoxDecorator){c(b._baseSelector+" .jta-tweet-box").tweetBox(b._tweetBoxConfig)}if(b.followButtonDecorator){c(b._baseSelector+" .jta-follow-button").followButton(b.username)}if(b.connectButtonDecorator){var d=a.extend({authComplete:function(a){updateLoginInfoElement(b,c)},signOut:function(){updateLoginInfoElement(b,c)}},b._connectButtonConfig);c(b._baseSelector+" .jta-connect-button").connectButton(d);updateLoginInfoElement(b,c)}})}};bindEventHandlers=function(b){if(b.tweetFeedControlsDecorator){if(b._tweetFeedConfig.paging.mode=="prev-next"){a(b._baseSelector+" .jta-tweet-list-controls-button-prev").bind("click",function(){if(!isLoading(b)&&b._tweetFeedConfig.paging._offset>0){prevPage(b,true)}});a(b._baseSelector+" .jta-tweet-list-controls-button-next").bind("click",function(){if(!isLoading(b)){nextPage(b,true)}})}else if(b._tweetFeedConfig.paging.mode=="endless-scroll"){b._tweetFeedElement.bind("scroll",function(){if(!isLoading(b)&&a(this)[0].scrollHeight-a(this).scrollTop()==a(this).outerHeight()){nextPage(b,false)}})}else{a(b._baseSelector+" .jta-tweet-list-controls-button-more").bind("click",function(){if(!isLoading(b)){nextPage(b,false)}})}}};nextPage=function(a,b){doPage(a,b,Math.min(a._tweetFeedConfig.paging._offset+a._tweetFeedConfig.paging._limit,a._tweetsCache.length))};prevPage=function(a,b){doPage(a,b,Math.max(0,a._tweetFeedConfig.paging._offset-a._tweetFeedConfig.paging._limit))};doPage=function(a,b,c){a._tweetFeedConfig.paging._offset=c;a._tweetFeedConfig._clearBeforePopulate=b;populateTweetFeed(a)};startAutorefresh=function(a){if(a._tweetFeedConfig.autorefresh.mode!="none"&&a._tweetFeedConfig.paging.mode!="prev-next"&&a._tweetFeedConfig.autorefresh.duration!=0&&(a._tweetFeedConfig.autorefresh.duration<0||(new Date).getTime()-a._tweetFeedConfig.autorefresh._startTime<=a._tweetFeedConfig.autorefresh.duration*1e3)){window.setTimeout(function(){processAutorefresh(a)},a._tweetFeedConfig.autorefresh.interval*1e3)}};stopAutorefresh=function(a){a._tweetFeedConfig.autorefresh.duration=0};processAutorefresh=function(b){if(b._tweetFeedConfig.autorefresh.duration!=0){getRateLimitedData(b,true,getFeedUrl(b,false),function(b,c){var d=(b.results||b).slice(0);d.reverse();a.each(d,function(a,b){if(b.id_str){b.id=b.id_str}if(b.in_reply_to_status_id_str){b.in_reply_to_status_id=b.in_reply_to_status_id_str}if(!isTweetInAutorefreshCache(b,c)&&!isTweetInCache(b,c)){if(c.tweetFilter(b,c)){c._autorefreshTweetsCache.unshift(b);if(c._tweetFeedConfig.autorefresh.max>0){while(c._autorefreshTweetsCache.length>c._tweetFeedConfig.autorefresh.max){c._autorefreshTweetsCache.pop()}}}}});populateTweetFeed2(c)});startAutorefresh(b)}};startTimestampRefresh=function(a){if(a.tweetTimestampDecorator&&typeof a._tweetFeedConfig.showTimestamp=="object"&&a._tweetFeedConfig.showTimestamp.refreshInterval>0){window.setTimeout(function(){processTimestampRefresh(a)},a._tweetFeedConfig.showTimestamp.refreshInterval*1e3)}};processTimestampRefresh=function(b){a.each(b._tweetFeedElement.find(".jta-tweet-timestamp-link"),function(c,d){var e=a(d).attr("data-timestamp");a(d).html(b.tweetTimestampFormatter(e,b))});startTimestampRefresh(b)};isTweetInCache=function(a,b){var c=b._tweetsCache.length;for(var d=0;d<c;d++){if(a.id==b._tweetsCache[d].id){return true}}return false};isTweetInAutorefreshCache=function(a,b){var c=b._autorefreshTweetsCache.length;for(var d=0;d<c;d++){if(a.id==b._autorefreshTweetsCache[d].id){return true}}return false};showLoadingIndicator=function(b){if(b._tweetFeedElement&&b.loadingDecorator&&!b._loadingIndicatorElement){b._loadingIndicatorElement=a(b.loadingDecorator(b));b.loadingIndicatorVisualizer(b._tweetFeedElement,b._loadingIndicatorElement,b,null);b._tweetFeedElement.scrollTop(1e6)}};hideLoadingIndicator=function(a,b){if(a._loadingIndicatorElement){a.loadingIndicatorVisualizer(null,a._loadingIndicatorElement,a,b);a._loadingIndicatorElement=null}else{if(b){b()}}};isLoading=function(a){return a._loadingIndicatorElement!=null};formatDate=function(a){return a.replace(/^([a-z]{3})( [a-z]{3} \d\d?)(.*)( \d{4})$/i,"$1,$2$4$3")};getUserScreenName=function(a){var b=a.user?a.user.screen_name:false||a.from_user;return b};getScreenName=function(a){var b=a.retweeted_status||a;var c=b.user?b.user.screen_name:false||b.from_user;return c};getFullName=function(a){var b=a.retweeted_status||a;var c=b.user?b.user.name:undefined;return c};validateRange=function(a,b,c){if(a<b)a=b;if(a>c)a=c;return a};showError=function(a,b){if(a.errorDecorator&&a._tweetFeedElement){a._tweetFeedElement.append(a.errorDecorator(b,a))}};getPagedTweets=function(a,b){a._tweetFeedConfig._recLevel=0;getRecPagedTweets(a,a._tweetFeedConfig.paging._offset,a._tweetFeedConfig.paging._limit,b)};getRecPagedTweets=function(b,c,d,e){++b._tweetFeedConfig._recLevel;if(c+d<=b._tweetsCache.length||b._tweetFeedConfig._recLevel>3||b._tweetFeedConfig._noData){if(c+d>b._tweetsCache.length){d=Math.max(0,b._tweetsCache.length-c)}var f=[];for(var g=0;g<d;g++){f[g]=b._tweetsCache[c+g]}e(f,b)}else{++b._tweetFeedConfig._pageParam;getRateLimitedData(b,false,getFeedUrl(b,true),function(b,f){var g=b.results||b;if(g.length==0){f._tweetFeedConfig._noData=true}else{a.each(g,function(a,b){if(b.id_str){b.id=b.id_str}if(b.in_reply_to_status_id_str){b.in_reply_to_status_id=b.in_reply_to_status_id_str}if(!f._tweetFeedConfig._maxId){f._tweetFeedConfig._maxId=b.id}if(f.tweetFilter(b,f)){f._tweetsCache.push(b)}})}getRecPagedTweets(f,c,d,e)})}};getRateLimitedData=function(a,b,c,d){getRateLimit(a,function(e){if(e&&e.remaining_hits<=0){a._stats.rateLimitPreventionCount++;hideLoadingIndicator(a,null);return}getData(a,b,c,d)})};getData=function(a,b,c,d){a._stats.dataRequestCount++;if(!a.onDataRequestHandler(a._stats,a)){hideLoadingIndicator(a,null);return}if(!b){showLoadingIndicator(a)}a.tweetDataProvider(c,function(b){if(b.error){showError(a,b.error)}else{d(b,a)}})};getRateLimit=function(a,b){a.rateLimitDataProvider(function(c){a._stats.rateLimit=c;a.onRateLimitDataHandler(a._stats,a);b(c)})};defaultTweetDataProvider=function(b,c){a.getJSON(b,c)};defaultRateLimitDataProvider=function(b){a.getJSON("http://api.twitter.com/1/account/rate_limit_status.json?callback=?",b)}})(jQuery);

